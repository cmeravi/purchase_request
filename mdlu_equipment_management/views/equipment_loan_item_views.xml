<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <!-- Equipment item Form view -->
  <record id="mdlu_equipment_item_form" model="ir.ui.view">
    <field name="name">mdlu.equipment.item.form</field>
    <field name="model">equipment.loan.item</field>
    <field name="arch" type="xml">
      <form>
        <header>
          <button name="action_verify"
            states="new" class="oe_highlight"
            string="Verify"
            type="object"/>
          <field name="state" widget="statusbar"
                 statusbar_visible="new,verified"/>
        </header>
        <sheet>
          <div name="button_box">
            <field name="loan_availability" invisible="1"/>
            <field name="loan_id" invisible="1"/>
            <button name="action_view_loans" class="oe_stat_button" style="float: right;" type="object">
                <div role="img" id="oe_equipment_loan_status" class="fa fa-fw fa-circle o_button_icon oe_equipment_loan_status_green" attrs="{'invisible': [('loan_availability', '!=', 'in')]}" aria-label="Available" title="Available"/>
                <div role="img" id="oe_equipment_loan_status" class="fa fa-fw fa-circle o_button_icon oe_equipment_loan_status_yellow" attrs="{'invisible': [('loan_availability', '!=', 'req')]}" aria-label="Requested" title="Requested"/>
                <div role="img" id="oe_equipment_loan_status" class="fa fa-fw fa-circle o_button_icon oe_equipment_loan_status_red" attrs="{'invisible': [('loan_availability', '!=', 'out')]}" aria-label="Checked Out" title="Checked Out"/>
                <div class="o_stat_info">
                    <span class="o_stat_text">Loan Status</span>
                </div>
            </button>
          </div>
          <div class="oe_title">
            <label class="oe_edit_only" for="name" string="Item Name"/>
            <h1><field name="name" placeholder="Item Name"/></h1>
          </div>
          <group>
            <group>
              <field name="product_id"/>
            </group>
          </group>
          <separator/>
          <field name="last_check_in" attrs="{'invisible': [('last_check_in', '=', False)]}"/>
          <field name="last_check_out" attrs="{'invisible': [('last_check_out', '=', False)]}"/>
          <field name="repair" attrs="{'invisible': [('repair', '=', False)]}"/>
          <notebook>
            <page name="additional_info" string="Item Information">
              <group>
                <group>
                  <field name="make"/>
                  <field name="model"/>
                  <field name="serial_number"/>
                  <field name="barcode"/>
                </group>
                <group>
                  <field name="img" widget='image' options='{"preview_image":"image_medium"}'/>
                </group>
              </group>
            </page>
          </notebook>
        </sheet>
        <div class="oe_chatter">
          <field name="message_follower_ids" widget="mail_followers"/>
          <field name="message_ids" widget="mail_thread"/>
        </div>
      </form>
    </field>
  </record>

  <!-- Equipment item tree(list) view -->
  <record id="mdlu_equipment_item_tree" model="ir.ui.view">
    <field name="name">mdlu.equipment.item.tree</field>
    <field name="model">equipment.loan.item</field>
    <field name="arch" type="xml">
      <tree>
        <field name="name"/>
        <field name="product_id"/>
        <field name="categ_id"/>
        <field name="loan_availability"/>
        <field name="state"/>
      </tree>
    </field>
  </record>

  <!-- Loanable items Search View -->
  <record id="view_equipment_item_search" model="ir.ui.view">
    <field name="name">equipment.item.search</field>
    <field name="model">equipment.loan.item</field>
    <field name="arch" type="xml">
      <search string="Equipment Request Lines">
        <field name="loan_availability"/>
        <field name="name"/>
        <!-- <field name=""/> -->
        <!-- <filter name="" string="" domain="[('','','')]"/> -->
        <filter name="available" string="Available" domain="[('loan_availability','=','in')]"/>
        <filter name="requested" string="Requested" domain="[('loan_availability','=','req')]"/>
        <filter name="checked_out" string="Checked Out" domain="[('loan_availability','=','out')]"/>
        <separator/>
        <filter name="new" string="Needs Verification" domain="[('state','=','new')]"/>
        <filter name="verified" string="Verified" domain="[('state','=','verified')]"/>

        <group expand="0" string="Group By">
          <filter name="category" string="Category" context="{'group_by': 'categ_id'}"/>
          <filter name="product" string="Product" context="{'group_by': 'product_id'}"/>
        </group>
      </search>
    </field>
  </record>

  <!-- Equipment cateogry tree view -->
  <record id="mdlu_equipment_loan_category_tree" model="ir.ui.view">
    <field name="name">mdlu.equipment.loan.category.tree</field>
    <field name="model">equipment.loan.category</field>
    <!-- <field name="field_parent"></field> -->
    <field name="arch" type="xml">
      <tree string="Loanable Item Types" editable="bottom">
          <field name="name"/>
          <field name="department_id"/>
      </tree>
    </field>
  </record>

  <record id="mdlu_equipment_loan_category_form" model="ir.ui.view">
      <field name="name">mdlu.equipment.loan.cateogry.form</field>
      <field name="model">equipment.loan.category</field>
      <field name="arch" type="xml">
        <form string="Stage of Notes">
          <group>
            <group>
              <field name="name"/>
            </group>
            <group>
              <field name="department_id"/>
            </group>
          </group>
        </form>
      </field>
    </record>


  <record id="action_equipment_item" model="ir.actions.act_window">
      <field name="name">Loanable Items</field>
      <field name="res_model">equipment.loan.item</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="search_view_id" ref="view_equipment_item_search"/>
      <field name="help" type="html">
          <p class="o_view_nocontent_empty_folder" type="html">
              There are currently no loanable items.
          </p><p>
              Loanable items will be displayed here.
          </p>
      </field>
  </record>

  <record id="action_equipment_loan_category" model="ir.actions.act_window">
      <field name="name">Loanable Item Type</field>
      <field name="res_model">equipment.loan.category</field>
      <field name="view_type">form</field>
      <field name="view_mode">tree,form</field>
      <field name="help" type="html">
          <p class="o_view_nocontent_empty_folder" type="html">
              There are currently no loanable item types.
          </p><p>
              Loanable item types will be displayed here.
          </p>
      </field>
  </record>

  <!-- Equipment Loan Menus -->
  <menuitem name="Item Management"
    id="mdlu_item_management_loan"
    parent="menu_equipment_loan_management_root"/>

  <menuitem name="Loanable Items"
    id="mdlu_item_menu_loan"
    parent="mdlu_item_management_loan"
    action="action_equipment_item"
    sequence="100"
    />

  <menuitem name="Loanable Item Types"
    id="mdlu_item_type_menu_loan"
    parent="mdlu_item_management_loan"
    action="action_equipment_loan_category"
    sequence="110"
    />

    <!-- Equipment Request Menus -->
    <menuitem name="Item Management"
      id="mdlu_item_management_request"
      parent="menu_equipment_request_root"/>

    <menuitem name="Loanable Items"
      id="mdlu_item_menu_request"
      parent="mdlu_item_management_request"
      action="action_equipment_item"
      sequence="100"
      />

    <menuitem name="Loanable Item Types"
      id="mdlu_item_type_menu_request"
      parent="mdlu_item_management_request"
      action="action_equipment_loan_category"
      sequence="110"
      />

</odoo>
